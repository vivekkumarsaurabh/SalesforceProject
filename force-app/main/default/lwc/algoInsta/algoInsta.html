<template>
    <template if:true={isModal}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-03" aria-modal="true"
            aria-describedby="modal-content-id-3" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <lightning-icon
                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse iconHover"
                    icon-name="utility:close" alternative-text="preview" size="x-large"
                    style="--sds-c-icon-color-foreground-default:#fff;" onclick={isclosdModal}></lightning-icon>
                <header class="slds-modal__header">
                    <div class="slds-grid">
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:back" alternative-text="preview"
                                size="small" style="--sds-c-icon-color-foreground-default:#000000;"
                                onclick={isBackHandle}></lightning-icon>

                        </div>
                        <div class="slds-col slds-size_8-of-12">
                            <h2 id="modal-heading-03" class="slds-text-heading_medium slds-hyphenate">Create new post
                            </h2>
                        </div>
                        <div class="slds-col slds-size_2-of-12">
                            <template if:true={isQuote}>
                                <p style="color:rgb(18, 155, 209); font-weight:700;" onclick={shareHandler}>
                                    Share
                                </p>
                            </template>
                        </div>
                    </div>

                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-3">
                    <template if:true={isDrop}>
                        <div
                            style="margin: auto; align-items:center; justify-content:center; display:flex; height:250px;">
                            <lightning-file-upload label="Choose from your computer" name="fileUploader"
                                record-id={recordId} onuploadfinished={handleUploadFinished} title=""
                                multiple></lightning-file-upload>
                        </div>
                    </template>
                    <template if:true={isQuote}>
                        <div class="slds-grid">
                            <div class="slds-col slds-size_6-of-12">
                                <lightning-carousel disable-auto-scroll>
                                    <template for:each={slides} for:item="iterate">
                                        <lightning-carousel-image key={iterate} src={iterate.image}>
                                        </lightning-carousel-image>
                                    </template>
                                </lightning-carousel>

                            </div>
                            <div class="slds-col slds-size_6-of-12">
                                <div class="slds-grid">
                                    <div class="profile"
                                        style="width: 30px; height:30px; background-color:aqua; border-radius:50%;">
                                    </div>
                                    <span style="margin:5px;">
                                        Vivek Kumar
                                    </span>
                                </div>
                                <br>
                                <div class="slds-grid">
                                    <textarea class="textA" name="input2" cols="60" rows="10" autocomplete="off"
                                        autocapitalize="off" autocorrect="off" spellcheck="false"
                                        onkeyup={saveTextAreaHandler}
                                        style="border:none; outline:none; border: none; text-decoration: none;"
                                        placeholder="Write your caption..."></textarea>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={isDiscard}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-04" aria-modal="true"
            aria-describedby="modal-content-id-4" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 id="modal-heading-04" class="slds-text-heading_medium slds-hyphenate"> Discard post?</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-4">
                    If you leave, your edits won't be saved.
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={discardCancelModal}
                        title="Cancel">Cancel</button>
                    <button class="slds-button slds-button_destructive" onclick={discardHandler}
                        title="Discard">Discard</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={isDeleteMsg}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-14" aria-modal="true"
            aria-describedby="modal-content-id-4" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 id="modal-heading-14" class="slds-text-heading_medium slds-hyphenate"> Unsend message?</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-14">
                    This will remove the message for everyone but people may have seen it already. Unsent messages may
                    still be included if the conversation is reported.
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={deleteCancelModal}
                        title="Cancel">Cancel</button>
                    <button class="slds-button slds-button_destructive" onclick={deleteMsgHandler}
                        title="Discard">Unsend</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={isSwitchUser}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-16" aria-modal="true"
            aria-describedby="modal-content-id-16" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 id="modal-heading-16" class="slds-text-heading_medium slds-hyphenate"> AlgoInsta</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium slds-form">
                    <lightning-input type="email" name="switchemail" placeholder="Enter your Email" class="userMail"
                        required onchange={switchUserEmail}></lightning-input>
                    <br>
                    <lightning-input type="password" name="switchpassword" placeholder="Enter your Password"
                        class="userPass" maxlength="100" required></lightning-input>

                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={switchCancelModal}
                        title="Cancel">Cancel</button>
                    <button class="slds-button slds-button_brand" onclick={loginHandle} title="Login">Login</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={isEditProfile}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-17" aria-modal="true"
            aria-describedby="modal-content-id-17" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 id="modal-heading-17" class="slds-text-heading_medium slds-hyphenate"> Edit Profile</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium slds-form">
                    <lightning-input type="text" name="updateName" value={UserName} class="userUpdateName" required
                        onchange={editNameChange}></lightning-input>
                    <br>
                    <lightning-input type="password" name="updatePassword" value={userPass} class="userPass"
                        maxlength="100" required onchange={editPassword}></lightning-input>
                    <br>

                    <div class="slds-grid">
                        <div class="slds-col slds-size_2-of-12"><img src={userPic} alt="profilePic"
                                style="width: 40px; height:40px; border-radius:50%;"></div>
                        <div class="slds-col slds-size_10-of-12">
                            <button class="slds-button slds-button_brand" onclick={uploadPicHandler}
                                title="Cancel">Change Pic</button>
                            <input type="file" class="picInput" style="display: none;"
                                onchange={updateProfilePic}></input>

                        </div>
                    </div>


                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={editProfileCancelHandler}
                        title="Cancel">Cancel</button>
                    <button class="slds-button slds-button_brand" onclick={updateProfileHandler} title="Login">Update
                        Profile</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={isFollowerDetailsModal}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-10" aria-modal="true"
            aria-describedby="modal-content-id-10" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container" style="width: 30%;">
                <lightning-icon
                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse iconHover"
                    icon-name="utility:close" alternative-text="preview" size="x-large"
                    style="--sds-c-icon-color-foreground-default:#fff;"
                    onclick={isFolloweClosedHandler}></lightning-icon>

                <header class="slds-modal__header">
                    <h2 id="modal-heading-10" class="slds-text-heading_medium slds-hyphenate">Followers</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-10">
                    <template for:each={userDetailsData.followerList} for:item="iterateRec">
                        <div class="slds-grid" key={iterateRec} style="width:100%;">
                            <div class="slds-col slds-size_2-of-12"><img src={iterateRec.profileImg} alt="profilePic"
                                    style="width: 40px; height:40px; border-radius:50%;"></div>
                            <div class="slds-col slds-size_8-of-12">{iterateRec.name}</div>
                            <div class="slds-col slds-size_2-of-12"> <button class="slds-button btn"
                                 data-followeremail={iterateRec.email} data-followername={iterateRec.name}  style="color:#000000; background-color:rgb(216, 214, 214);  border-radius:5px; padding:0px 10px;" onclick={removeFollowerHandler}>Remove</button>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={isFollowingDetailsModal}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-11" aria-modal="true"
            aria-describedby="modal-content-id-8" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container" style="width:30%;">
                <lightning-icon
                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse iconHover"
                    icon-name="utility:close" alternative-text="preview" size="x-large"
                    style="--sds-c-icon-color-foreground-default:#fff;"
                    onclick={isFollowingDetailsClosedHandler}></lightning-icon>

                <header class="slds-modal__header">
                    <h2 id="modal-heading-11" class="slds-text-heading_medium slds-hyphenate"> Following</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-11">
                    <template for:each={userDetailsData.followingList} for:item="iterateRec">
                        <div class="slds-grid" key={iterateRec} style="width:100%;">
                            <div class="slds-col slds-size_2-of-12"> <img src={iterateRec.profileImg} alt="profilePic"
                                    style="width: 40px; height:40px; border-radius:50%;"> </div>
                            <div class="slds-col slds-size_8-of-12">{iterateRec.name}</div>
                            <div class="slds-col slds-size_2-of-12"> <button class="slds-button btn"
                                    style="color:#000000; background-color:rgb(216, 214, 214); border-radius:5px; padding:0px 10px;">
                                    following</button> </div>
                        </div>
                    </template>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>


    <template if:true={isComment}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-07" aria-modal="true"
            aria-describedby="modal-content-id-7" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <lightning-icon
                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse iconHover"
                    icon-name="utility:close" alternative-text="preview" size="x-large"
                    style="--sds-c-icon-color-foreground-default:#fff;" onclick={closdComment}></lightning-icon>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-7">
                    <div class="slds-grid">
                        <template for:each={singlePost} for:item="iterate">
                            <div class="slds-col slds-size_6-of-12" key={iterate}>
                                <lightning-carousel disable-auto-scroll>
                                    <template for:each={iterate.post.imagesList} for:item="itrateImg">
                                        <lightning-carousel-image key={itrateImg} src={itrateImg.image}>
                                        </lightning-carousel-image>
                                    </template>
                                </lightning-carousel>
                            </div>
                            <div class="slds-col slds-size_6-of-12" key={iterate} style="padding-left:3%;">
                                <div class="slds-grid" style="border-bottom:1px solid gray; height:50px;">
                                    <div class="slds-col slds-size_2-of-12">
                                        <img src={iterate.post.profileImg} alt="profilePic"
                                            style="width: 30px; height:30px; border-radius:50%;">
                                    </div>
                                    <div class="slds-col slds-size_2-of-12">
                                        <b>{iterate.post.userName}</b>
                                    </div>
                                    <div class="slds-col slds-size_7-of-12"></div>
                                    <div class="slds-col slds-size_1-of-12">
                                        <lightning-icon class="iconHover" icon-name="utility:threedots"
                                            alternative-text="preview" size="x-small"
                                            style="--sds-c-icon-color-foreground-default:grey; margin:5px 10px;"></lightning-icon>
                                    </div>
                                </div>

                                <div class="slds-col cmt">
                                    <template for:each={iterate.post.commentsList} for:item="iterateCmt">
                                        <div class="slds-grid" key={iterateCmt}>
                                            <div class="slds-col slds-size_2-of-12">
                                                <img src={iterateCmt.userProfile} alt="profilePic"
                                                    style="width: 30px; height:30px; border-radius:50%;">
                                            </div>
                                            <div class="slds-col slds-size_2-of-12" style="text-align: center;">
                                                <b> {iterateCmt.userName}</b>
                                            </div>
                                            <div class="slds-col slds-size_7-of-12" style="text-align: center;">
                                                <p>
                                                    {iterateCmt.comments}
                                                </p>
                                            </div>
                                            <div class="slds-col slds-size_2-of-12" style="text-align: center;">
                                            </div>
                                        </div>
                                        <br key={iterateCmt}>
                                    </template>

                                </div>
                                <div class="slds-grid" style="height:40px;">
                                    <div class="slds-col slds-size_1-of-12" data-true="true">
                                        <lightning-icon icon-name="utility:heart" alternative-text="preview"
                                            size="small" style="margin:5px 10px;" data-id={iterate.post.Id}
                                            onclick={likeHandler}></lightning-icon>
                                    </div>
                                    <div class="slds-col slds-size_1-of-12"><lightning-icon class="commentHover"
                                            icon-name="utility:chat" alternative-text="preview" size="small"
                                            data-id={iterate.post.Id}
                                            style="--sds-c-icon-color-foreground-default:grey; margin:5px 10px;"
                                            onclick={commentHandler}></lightning-icon>
                                    </div>
                                    <div class="slds-col slds-size_1-of-12"><lightning-icon class="shareHover"
                                            icon-name="utility:send" alternative-text="preview" size="small"
                                            style="--sds-c-icon-color-foreground-default:grey; margin:5px 10px;"
                                            onclick={sendHandler}></lightning-icon>
                                    </div>
                                    <div class="slds-col slds-size_8-of-12"></div>
                                    <div class="slds-col slds-size_1-of-12"><lightning-icon class="iconHover"
                                            icon-name="utility:bookmark_stroke" alternative-text="preview" size="small"
                                            style="--sds-c-icon-color-foreground-default:grey; margin:5px 10px;"></lightning-icon>
                                    </div>
                                </div>

                                <div class="slds-grid">
                                    <div class="slds-col slds-size_10-of-12">
                                        <lightning-textarea name="input1"
                                            style="border:none; height:35px; resize: none;" class="cmtField"
                                            placeholder="Add a Comment..." rows="1"
                                            onchange={cmtPost}></lightning-textarea>
                                    </div>
                                    <div class="slds-col slds-size_2-of-12">
                                        <p style="color:rgb(18, 155, 209); font-weight:700; margin:50%;"
                                            data-id={iterate.Id} onclick={postHandlerCmt}>
                                            Post
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <template if:true={isMsgUser}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-15" aria-modal="true"
            aria-describedby="modal-content-id-10" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container" style="width: 30%;">
                <lightning-icon
                    class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse iconHover"
                    icon-name="utility:close" alternative-text="preview" size="x-large"
                    style="--sds-c-icon-color-foreground-default:#fff;" onclick={isMsgClose}></lightning-icon>

                <header class="slds-modal__header">
                    <h2 id="modal-heading-15" class="slds-text-heading_medium slds-hyphenate">New message</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-15">
                    <div class="slds-grid">
                        <div class="slds-col slds-size_2-of-12">
                            <h2 style="font-size: 1rem; margin-top:20px;">To :</h2>
                        </div>
                        <div class="slds-col slds-size_10-of-12">
                            <lightning-input type="search" value={searchValue} class="seacrhUserBox"
                                onchange={searchUserHandler} placeholder="Search..."> </lightning-input>
                        </div>
                    </div>
                    <div class="slds-grid" style="height: 300px;">
                        <template for:each={searchValues} for:item="iterateUser">
                            <div class="slds-grid" key={iterateUser.Id} data-email={iterateUser.userEmail}
                                data-id={iterateUser.Id} onclick={clickMsgHandler} style="padding: 5%;">
                                <div class="slds-col slds-size_3-of-12"><img src={iterateUser.profilePic} height="45px"
                                        width="45px" style="border-radius:50%;"></div>
                                <div class="slds-col slds-size_6-of-12">
                                    <h5 style="font-size: 1rem; color:#000000;">{iterateUser.name}</h5>
                                </div>
                                <div class="slds-col slds-size_3-of-12"></div>
                            </div>
                            <br key={iterateUser.Id}>
                        </template>
                    </div>
                    <div>
                        <template if:true={isChat}>
                            <button class="slds-button slds-button_brand" disabled={isOnChat} style="width: 100%;"
                                onclick={chatMsgHandler}>chat</button>
                        </template>
                        <template if:false={isChat}>
                            <button class="slds-button slds-button_brand" disabled={isOnSend} style="width: 100%;"
                                onclick={senderPostHandler}>Send</button>
                        </template>

                    </div>

                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>



    <div class="mainBody" style="margin:auto;">
        <template if:true={isLogin}>
            <div style=" margin:auto; width:22%; height:340px;  box-shadow:0px 0px 1px 0px gray; padding:2%;">
                <div style="text-align: center;">
                    <h1>AlgoInsta</h1>
                </div>
                <div class="slds-form" style="margin-top: 5%;">
                    <lightning-input type="email" name="useremail" label="Email" placeholder="Enter your Email" class="userMail"
                        required onchange={userEmail}></lightning-input>
                    <br>
                    <lightning-input type="password" name="userpassword" label="Password" placeholder="Enter your Password"
                        class="userPass" maxlength="100" required></lightning-input>
                    <div style="text-align: center; line-height:1%;">
                        <button class="slds-button slds-button_brand"
                            style="width:100%; margin-top:25px; border-radius:10px;"
                            onclick={loginHandle}>Login</button>
                    </div>
                </div>
            </div>
            <br>
            <div style=" box-shadow:0px 0px 1px 0px gray;  height: 80px; width: 22%; margin: auto;">
                <p style="font-size: 0.8 rem; text-align:center; padding-top:5%;">Don't have an account ? <span
                        style="color:rgb(18, 155, 209); font-weight:700;" class="signUpLink"
                        onclick={signUpHandler}>Sign up</span></p>                       
                        <p style="font-size: 0.8 rem; text-align:center; padding-top:5%; color:rgb(18, 155, 209); font-weight:700;" onclick={forgetPasswordHandler} class="forgot">Forget password</p>
            </div>
        </template>

        <template if:true={isSignUp}>
            <div style=" margin:auto; width:22%; height:390px;  box-shadow:0px 0px 1px 0px gray; padding:2%;">
                <div style="text-align: center;">
                    <h1>AlgoInsta</h1>
                </div>
                <div class="slds-form" style="margin-top: 5%;">
                    <lightning-input type="text" name="name" label="Name" placeholder="Enter your Name" class="input inputName"
                        maxlength="100" required></lightning-input>
                    <br>
                    <lightning-input type="email" name="email" label="Email" placeholder="Enter your Email" class="input inputEmail"
                        required
                        pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/"
                        message-when-pattern-mismatch="Please enter a valid phone number like john@gmail.com"></lightning-input>
                    <br>
                    <lightning-input type="password" name="pass" label="Password" placeholder="Enter your Password"
                        class="input inputPass" required></lightning-input>
                    <div style="text-align: center; line-height:1%;">
                        <button class="slds-button slds-button_brand"
                            style="width:100%; margin-top:25px; border-radius:10px;" onclick={signUpHandle}>
                            Sign up</button>

                    </div>
                </div>
            </div>
            <br>
            <div style=" box-shadow:0px 0px 1px 0px gray;  height: 50px; width: 22%; margin: auto;">
                <p style="font-size: 0.8 rem; text-align:center; padding-top:5%;">Have an account ? <span
                        style="color:rgb(18, 155, 209); font-weight:700;" class="loginLink"
                        onclick={loginPageHandler}>Log in</span></p>
            </div>
        </template>
        
        <template if:true={isForget}>
            <div style=" margin:auto; width:22%; height:360px;  box-shadow:0px 0px 1px 0px gray; padding:2%;">
                <div style="text-align: center;">
                    <h1>Forget Password</h1>
                </div>
                <div class="slds-form" style="margin-top: 5%;">
                    <template if:true={isMatchPassword}>
                        <lightning-icon class="iconHover" icon-name="utility:success"
                            alternative-text="preview" size="xx-small"
                            style="--sds-c-icon-color-foreground-default:rgb(21, 138, 48); left:16%; top:20px; position:relative;"></lightning-icon>
                    </template>
                    <template if:false={isMatchPassword}>
                        <lightning-icon class="iconHover" icon-name="utility:close"
                            alternative-text="preview" size="xx-small"
                            style="--sds-c-icon-color-foreground-default:rgb(203, 30, 30); left:16%; top:20px; position:relative;"></lightning-icon>
                    </template>
                    <lightning-input type="email" name="useremail" placeholder="Enter your Email" label="Email" class="userMail"
                        required onchange={emailForget}></lightning-input>
                    <br>
                    
                    <!-- <lightning-input type="text" name="otp" placeholder="Enter your otp" label="OTP" required onchange={otpChangeHandler}></lightning-input> -->
                    <div style="text-align: center; line-height:1%;">
                        <button class="slds-button slds-button_brand" style="width:100%; margin-top:25px; border-radius:10px;" onclick={otpHandler}>Send OTP</button>
                        <p onclick={gotoLoginHandler} style="font-size: 0.8 rem; text-align:center; padding-top:5%; color:rgb(18, 155, 209); font-weight:700;">go to Login Page</p>
                    </div>
                
                </div>
            </div>
        </template>

        <template if:true={isOTP}>
            <div style=" margin:auto; width:22%; height:360px;  box-shadow:0px 0px 1px 0px gray; padding:2%;">
                <div style="text-align: center;">
                    <h1>OTP Verification <span class="time"></span></h1>
                </div>
                <div class="slds-form" style="margin-top: 5%;"> 
                    <lightning-input type="text" name="otp" placeholder="Enter your otp" label="OTP" required onchange={otpChangeHandler}></lightning-input>
                    <div style="text-align: center; line-height:1%;">
                        <button class="slds-button slds-button_brand btnVerification" style="width:100%; margin-top:25px; border-radius:10px;"  disabled={isbtnVerification} onclick={verifyEmailConfirmationHandler}>Verify Email</button>
                        <p onclick={gotoLoginHandler} style="font-size: 0.8 rem; text-align:center; padding-top:5%; color:rgb(18, 155, 209); font-weight:700;">go to Login Page</p>
                    </div>
                
                </div>
            </div>
        </template>

        <template if:true={isChangePassword}>
            <div style=" margin:auto; width:22%; height:350px;  box-shadow:0px 0px 1px 0px gray; padding:2%;">
                <div style="text-align: center;">
                    <h2>Change Your Password</h2>
                </div>
                <div class="slds-form" style="margin-top: 5%;">
                    <lightning-input type="password" name="newPass" label="Password" placeholder="Enter Your New Password" 
                        required onchange={newPassword}></lightning-input>
                    <br>
                    <template if:true={isCorrectPassword}>
                        <lightning-icon class="iconHover" icon-name="utility:success"
                            alternative-text="preview" size="xx-small"
                            style="--sds-c-icon-color-foreground-default:rgb(21, 138, 48); left:30%; top:20px; position:relative;"></lightning-icon>
                    </template>
                    <template if:false={isCorrectPassword}>
                        <lightning-icon class="iconHover" icon-name="utility:close"
                            alternative-text="preview" size="xx-small"
                            style="--sds-c-icon-color-foreground-default:rgb(203, 30, 30); left:30%; top:20px; position:relative;"></lightning-icon>
                    </template>
                    <lightning-input type="password" name="newPass" label="Re-Password" placeholder="Re-Enter your Password"
                        maxlength="100" required onchange={newChangePassword}></lightning-input>
                    <div style="text-align: center; line-height:1%;">
                        <button class="slds-button slds-button_brand"
                            style="width:100%; margin-top:25px; border-radius:10px;"
                            onclick={submitPassword}>Submit</button>
                            <p onclick={gotoLoginHandler} style="font-size: 0.8 rem; text-align:center; padding-top:5%; color:rgb(18, 155, 209); font-weight:700;">go to Login Page</p>

                    </div>
                </div>
            </div>
        </template>



        <template if:true={isHomePage}>
            <div class="slds-grid" style="height:100%;">
                <div class="slds-col slds-size_2-of-12" style="border-right: 1px solid rgb(200, 195, 195);">
                    <div>
                        <template if:false={instaLogo}>
                            <h1 style="font-size: 2rem;">AlgoInsta</h1>
                        </template>
                        <template if:true={instaLogo}>
                            <lightning-icon class="iconHover" icon-name="utility:video" alternative-text="preview"
                                size="small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>
                        </template>

                    </div>
                    <div class="slds-grid menu" onclick={homeHandler}>
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:home" alternative-text="preview"
                                size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>
                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2>Home</h2>
                        </div>

                    </div>
                    <div class="slds-grid menu" onclick={searchHandler}>
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:search" alternative-text="preview"
                                size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>
                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2>Search</h2>
                        </div>

                    </div>

                    <div class="slds-grid menu" onclick={reelHandler}>
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:play" alternative-text="preview"
                                size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>

                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2>Reels</h2>
                        </div>
                    </div>
                    <div class="slds-grid menu" onclick={messageHandler}>
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:chat" alternative-text="preview"
                                size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>

                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2>Message</h2>
                        </div>
                    </div>
                    <div class="slds-grid menu" onclick={notifiactionHandler}>
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:heart" alternative-text="preview"
                                size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>
                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2>Notification</h2>
                        </div>
                    </div>
                    <div class="slds-grid menu" onclick={createPostModal}>
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:record_create"
                                alternative-text="preview" size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>

                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2>Create</h2>
                        </div>
                    </div>
                    <div class="slds-grid menu">
                        <div class="slds-col slds-size_2-of-12">

                            <img src={userPic} alt="profilePic" style="width: 20px; height:20px; border-radius:50%;">
                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2 onclick={profilehandler}>Profile</h2>
                        </div>
                    </div>
                    <br><br>

                    <template if:true={isPopOver}>
                        <section aria-describedby="dialog-body-id-112" aria-labelledby="dialog-heading-id-117"
                            class="slds-popover slds-nubbin_left-top slds-popover_large" role="dialog">
                            <lightning-icon
                                class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close"
                                icon-name="utility:close" alternative-text="preview" size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"
                                onclick={closePopOverHandler}></lightning-icon>
                            <div class="slds-popover__body" id="dialog-body-id-112">
                                <div class="slds-media">
                                    <div class="slds-media__body">
                                        <ul class="menuItem">
                                            <li style="margin:5px;">Setting</li>
                                            <li style="margin:5px;" onclick={logoutHandler}>Log out</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </template>

                    <div class="slds-grid menu">
                        <div class="slds-col slds-size_2-of-12">
                            <lightning-icon class="iconHover" icon-name="utility:rows" alternative-text="preview"
                                size="x-small"
                                style="--sds-c-icon-color-foreground-default:#000000; margin:5px 10px;"></lightning-icon>

                        </div>
                        <div class="slds-col slds-size_10-of-12 menuName">
                            <h2 onclick={moreOptionHandler}>More</h2>
                        </div>
                    </div>
                </div>

                <template if:true={isHome}>
                    <div class="slds-col slds-size_10-of-12 postMainBodyContainer">
                        <div class="slds-grid" style="padding: 8px;">
                            <div class="slds-col slds-size_10-of-12">
                                <!-- <div class="parent">
                                    <div class="child"></div>
                                    <div class="child"></div>
                                    <div class="child"></div>
                                    <div class="child"></div>
                                    <div class="child"></div>
                                    <div class="child"></div>
                                    <div class="child"></div>
                                </div> -->
                                <div class="slds-grid" style="margin-top: 2%;">
                                    <div style="margin: auto;">
                                        <template for:each={posts} for:item="iterate">
                                            <div class="post" key={iterate.Id}>
                                                <div class="slds-grid"
                                                    style="height:60px; width:100%; background-color:#fff;">
                                                    <div class="slds-col slds-size_2-of-12">
                                                        <img src={iterate.post.profileImg} alt="profilePic"
                                                            style="width: 50px; height:50px; border-radius:50%;">
                                                    </div>
                                                    <div class="slds-col slds-size_8-of-12">
                                                        <h2 style="color: #000000; margin-top:2%;">
                                                            <b>{iterate.post.userName}</b>
                                                        </h2>
                                                    </div>
                                                    <div class="slds-col slds-size_2-of-12">
                                                        <lightning-icon class="iconHover" icon-name="utility:threedots"
                                                            alternative-text="preview" size="x-small"
                                                            style="--sds-c-icon-color-foreground-default:grey; margin:5px 10px;"></lightning-icon>
                                                    </div>

                                                </div>
                                                <div style="height:400px; width:100%;">
                                                    <lightning-carousel class="slds-carousel__content"
                                                        disable-auto-scroll>
                                                        <template for:each={iterate.post.imagesList}
                                                            for:item="itrateImg">
                                                            <lightning-carousel-image key={itrateImg}
                                                                src={itrateImg.image}>
                                                            </lightning-carousel-image>
                                                        </template>
                                                    </lightning-carousel>

                                                </div>
                                                <div class="postfooter"
                                                    style="height: 40px; margin-top:5%; width:100%; background-color:#fff;">
                                                    <div class="slds-grid">
                                                        <div class="slds-col slds-size_1-of-12" data-true="true"
                                                            data-id={iterate.post.Id} data-msg={iterate.post.userId}
                                                            data-picurl={iterate.post.postPicUrl} onclick={likeHandler}
                                                            style="align-items: center;">
                                                            <template if:false={iterate.post.likePost}>
                                                                <lightning-icon class="iconHover"
                                                                    icon-name="utility:heart" alternative-text="preview"
                                                                    size="small"
                                                                    style="--sds-c-icon-color-foreground-default:grey;"></lightning-icon>
                                                            </template>
                                                            <template if:true={iterate.post.likePost}>
                                                                <lightning-icon class="iconHover"
                                                                    icon-name="utility:heart" alternative-text="preview"
                                                                    size="small"
                                                                    style="--sds-c-icon-color-foreground-default:red;"></lightning-icon>
                                                            </template>
                                                        </div>
                                                        <div class="slds-col slds-size_1-of-12"
                                                            style="align-items: center;"><lightning-icon
                                                                class="commentHover" icon-name="utility:chat"
                                                                alternative-text="preview" size="small"
                                                                data-id={iterate.post.Id}
                                                                data-useridd={iterate.post.userId}
                                                                data-urlpic={iterate.post.postPicUrl}
                                                                style="--sds-c-icon-color-foreground-default:grey;"
                                                                onclick={commentHandler}></lightning-icon>
                                                        </div>
                                                        <div class="slds-col slds-size_1-of-12"
                                                            style="align-items: center;"><lightning-icon
                                                                class="shareHover" icon-name="utility:send"
                                                                alternative-text="preview" size="small"
                                                                data-postid={iterate.post.Id}
                                                                style="--sds-c-icon-color-foreground-default:grey;"
                                                                onclick={sendPostHandler}></lightning-icon>
                                                        </div>
                                                        <div class="slds-col slds-size_8-of-12"></div>
                                                        <div class="slds-col slds-size_1-of-12"
                                                            data-id={iterate.post.Id} onclick={saveHandler}
                                                            style="align-items: center;">
                                                            <template if:false={iterate.post.savePost}>
                                                                <lightning-icon class="iconHover"
                                                                    icon-name="utility:bookmark_stroke"
                                                                    alternative-text="preview" size="small"
                                                                    style="--sds-c-icon-color-foreground-default:grey;"></lightning-icon>
                                                            </template>
                                                            <template if:true={iterate.post.savePost}>
                                                                <lightning-icon class="iconHover"
                                                                    icon-name="utility:bookmark"
                                                                    alternative-text="preview" size="small"
                                                                    style="--sds-c-icon-color-foreground-default:grey;"></lightning-icon>
                                                            </template>
                                                        </div>
                                                    </div>
                                                    <div class="slds-grid">
                                                        <h2> <b> {iterate.post.likeCount}</b> likes </h2>
                                                    </div>
                                                    <div class="slds-grid">
                                                        <div class="slds-col slds-size_3-of-12">
                                                            <h2><b> {iterate.post.userName}</b></h2>
                                                        </div>
                                                        <div class="slds-col slds-size_6-of-12">
                                                            <p> {iterate.post.caption}</p>
                                                        </div>
                                                        <div class="slds-col slds-size_3-of-12">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <br key={iterate.Id}>
                                            <br key={iterate.Id}>
                                            <br key={iterate.Id}>
                                        </template>

                                    </div>
                                </div>
                            </div>
                            <div class="slds-col slds-size_2-of-12">
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_3-of-12">
                                        <img src={userPic} alt="profilePic"
                                            style="width: 55px; height:55px; border-radius:50%;">
                                    </div>
                                    <div class="slds-col slds-size_7-of-12">
                                        <h2>{UserName}</h2>
                                    </div>
                                    <div class="slds-col slds-size_2-of-12">
                                        <p style="color:rgb(18, 155, 209); font-weight:700;" data-id={userId}
                                            onclick={switchHandler}>
                                            Switch
                                        </p>
                                    </div>
                                </div>
                                <hr>
                                <template for:each={allUser} for:item="iterateUser">
                                    <div class="slds-grid" key={iterateUser}>
                                        <div class="slds-col slds-size_3-of-12">
                                            <img src={iterateUser.profileImg} alt="profilePic"
                                                style="width: 55px; height:55px; border-radius:50%;">
                                        </div>
                                        <div class="slds-col slds-size_7-of-12">
                                            <h2>{iterateUser.Name}</h2>
                                        </div>
                                        <div class="slds-col slds-size_2-of-12">
                                            <p style="color:rgb(18, 155, 209); font-weight:700;"
                                                data-id={iterateUser.Id} data-profileimg={iterateUser.profileImg}
                                                onclick={followHandler}>
                                                follow
                                            </p>
                                        </div>
                                    </div>
                                </template>

                            </div>
                        </div>
                    </div>
                </template>

                <template if:true={isProfile}>
                    <div class="slds-grid displayProfile">
                        <div class="slds-col slds-size_2-of-12"></div>
                        <div class="slds-col slds-size_8-of-12">
                            <div class="slds-grid">
                                <div class="slds-col slds-size_4-of-12">
                                    <img src={userPic} alt="profilePic"
                                        style="width: 120px; height:120px; border-radius:50%; border:2px solid #15e464;">
                                </div>
                                <div class="slds-col slds-size_8-of-12">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_4-of-12">
                                            <h2 style="font-size: 1.6rem; font-weight:600;">{UserName}</h2>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12">
                                            <button class="slds-button btn"
                                                style="color:#000000; background-color:rgb(216, 214, 214); border-radius:5px; padding:0px 10px;"
                                                onclick={editProfileHandler}>Edit
                                                profile</button>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12">
                                            <button class="slds-button btn"
                                                style="color:#000000; background-color:rgb(216, 214, 214); border-radius:5px; padding:0px 10px;">View
                                                archive</button>
                                        </div>
                                        <div class="slds-col slds-size_2-of-12">
                                            <lightning-icon class="iconHover" icon-name="utility:automate"
                                                alternative-text="preview" size="medium"
                                                style="--sds-c-icon-color-foreground-default:#000000;"></lightning-icon>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="slds-grid" style="width: 80%; margin-left:30px;">
                                        <div class="slds-col slds-size_4-of-12">
                                            <h3 style="font-size: 1rem;"><b>{userDetailsData.posts}</b> Posts</h3>
                                        </div>
                                        <div class="slds-col slds-size_4-of-12" onclick={folowerListHandler}>
                                            <h3 style="font-size: 1rem;"><b>{userDetailsData.follower}</b> followers
                                            </h3>
                                        </div>
                                        <div class="slds-col slds-size_4-of-12" onclick={followingListHandler}>
                                            <h3 style="font-size: 1rem;"><b>{userDetailsData.following}</b> following
                                            </h3>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <br>
                            <br>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_2-of-12"></div>
                                <div class="slds-col slds-size_8-of-12">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12">
                                            <div onclick={postProfileHandler} style="display: inline-flex;">
                                                <lightning-icon class="iconPost" icon-name="utility:table"
                                                    alternative-text="preview" size="x-small"
                                                    style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"></lightning-icon>
                                                <h5 class="Post"
                                                    style="border-top:1px solid #000000; color:#000000; padding-left:7px;">
                                                    POSTS</h5>
                                            </div>
                                        </div>
                                        <div class="slds-col slds-size_2-of-12">
                                            <div onclick={reelProfileHandler} style="display: inline-flex;">
                                                <lightning-icon class="iconReel" icon-name="utility:play"
                                                    alternative-text="preview" size="x-small"
                                                    style="--sds-c-icon-color-foreground-default:gray; margin-top:2px; padding:2px;"></lightning-icon>
                                                <h5 class="Reel" style="padding-left:7px;">REELS</h5>
                                            </div>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12">
                                            <div onclick={saveProfileHandler} style="display: inline-flex;">
                                                <lightning-icon class="iconSaved" icon-name="utility:bookmark_stroke"
                                                    alternative-text="preview" size="x-small"
                                                    style="--sds-c-icon-color-foreground-default:gray; margin-top:2px; padding:2px;"></lightning-icon>
                                                <h5 class="Saved" style="padding-left:7px;">SAVED</h5>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="slds-col slds-size_2-of-12"></div>
                            </div>
                            <br>
                            <div class="slds-grid">
                                <template if:true={isPostProfile}>
                                    <div class="slds-grid slds-wrap postOpen" style="height: 300px;">
                                        <template for:each={userPosts} for:item="iteratePost">
                                            <div class="slds-col slds-size_4-of-12" style="padding:3px;"
                                                key={iteratePost} data-postsid={iteratePost.postId}
                                                onclick={postsOpenHandler}>
                                                <img src={iteratePost.post.imageUrl} alt="" style="height:300px;"
                                                    width="100%">
                                            </div>
                                        </template>
                                    </div>
                                </template>
                                <template if:true={isReelProfile}>

                                </template>
                                <template if:true={isSaveProfile}>
                                    <div class="slds-grid slds-wrap" style="height: 300px;">
                                        <template for:each={userSavePosts} for:item="iteratePost">
                                            <div class="slds-col slds-size_4-of-12" style="border:2px silid #fff;"
                                                key={iteratePost}>
                                                <img src={iteratePost.post.imageUrl} alt="" style="height:300px;"
                                                    width="100%">
                                            </div>
                                        </template>
                                    </div>
                                </template>
                            </div>

                        </div>
                        <div class="slds-col slds-size_2-of-12"></div>
                    </div>
                </template>

                <template if:true={isNotification}>
                    <div style="width:100%; height:100%;">
                        <div class="slds-grid notification">
                            <div class="slds-col slds-size_12-of-12">
                                <h1 style="font-size:1.7rem; font-weight:500;">
                                    Notifications</h1>
                                <br>
                                <div style="height:100%;">
                                    <template for:each={notification} for:item="iterateNot">
                                        <div class="slds-grid" key={iterateNot}>
                                            <div class="slds-col slds-size_2-of-12"><img src={iterateNot.userPic}
                                                    height="35px" width="35px" style="border-radius:50%;"></div>
                                            <div class="slds-col slds-size_7-of-12">
                                                <h5 style="font-size: 0.8rem; color:#000000;"> <b>
                                                        {iterateNot.userName}</b></h5>
                                                <p>{iterateNot.body}</p>
                                            </div>
                                            <template if:false={iterateNot.follow}>
                                                <div class="slds-col slds-size_3-of-12"><img src={iterateNot.picUrl}
                                                        height="50px" width="50px"></div>
                                            </template>
                                            <template if:true={iterateNot.follow}>
                                                <div class="slds-col slds-size_3-of-12"><button
                                                        class="slds-button slds-button_brand"
                                                        title="follow">follow</button> </div>
                                            </template>

                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>

                <template if:true={isSearch}>
                    <div style="width: 100%; height:100%;">
                        <div class="slds-grid notification">
                            <div class="slds-col slds-size_12-of-12">
                                <h1 style="font-size:1.7rem; font-weight:500;">
                                    Search</h1>
                                <br>
                                <div style="margin:auto; height:50px;">
                                    <lightning-input type="search" value={searchValue} class="seacrhBox"
                                        onchange={searchKeyHandler} placeholder="Search"> </lightning-input>
                                </div>
                                <br>
                                <div style="height:100%;">
                                    <template for:each={searchValues} for:item="iterateUser">
                                        <div class="slds-grid" key={iterateUser.Id} data-email={iterateUser.userEmail}
                                            data-id={iterateUser.Id} onclick={openProfilehandler} style="padding: 5%;">
                                            <div class="slds-col slds-size_3-of-12"><img src={iterateUser.profilePic}
                                                    height="35px" width="35px" style="border-radius:50%;"></div>
                                            <div class="slds-col slds-size_6-of-12">
                                                <h5 style="font-size: 0.8rem; color:#000000;">{iterateUser.name}</h5>
                                            </div>
                                            <div class="slds-col slds-size_3-of-12"></div>
                                        </div>
                                        <br key={iterateUser.Id}>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                </template>

                <template if:true={isProfilePersonal}>
                    <div class="slds-grid displayProfile">
                        <div class="slds-col slds-size_2-of-12"></div>
                        <div class="slds-col slds-size_8-of-12">
                            <div class="slds-grid">
                                <div class="slds-col slds-size_4-of-12">
                                    <img src={personalUserData.profileImg} alt="profilePic"
                                        style="width: 120px; height:120px; border-radius:50%; border:2px solid #15e464;">
                                </div>
                                <div class="slds-col slds-size_8-of-12">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_4-of-12">
                                            <h2 style="font-size: 1.6rem; font-weight:600;">{personalUserData.name}</h2>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12">
                                            <button class="slds-button btn"
                                                style="color:#000000; background-color:rgb(216, 214, 214); border-radius:5px; padding:0px 10px;">Following</button>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12">
                                            <button class="slds-button btn"
                                                style="color:#000000; background-color:rgb(216, 214, 214); border-radius:5px; padding:0px 10px;">
                                                Message</button>
                                        </div>
                                        <div class="slds-col slds-size_2-of-12">
                                            <lightning-icon class="iconHover" icon-name="utility:threedots"
                                                alternative-text="preview" size="medium"
                                                style="--sds-c-icon-color-foreground-default:#000000;"></lightning-icon>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="slds-grid" style="width: 80%;">
                                        <div class="slds-col slds-size_4-of-12">
                                            <h3 style="font-size: 1rem;"><b>{personalUserData.posts}</b> Posts</h3>
                                        </div>
                                        <div class="slds-col slds-size_4-of-12" onclick={folowerListHandler}>
                                            <h3 style="font-size: 1rem;"><b>{personalUserData.follower}</b> followers
                                            </h3>
                                        </div>
                                        <div class="slds-col slds-size_4-of-12" onclick={followingListHandler}>
                                            <h3 style="font-size: 1rem;"><b>{personalUserData.following}</b> following
                                            </h3>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <br>
                            <br>
                            <div class="slds-grid">
                                <div class="slds-col slds-size_2-of-12"></div>
                                <div class="slds-col slds-size_8-of-12">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12">
                                            <div onclick={postProfileHandler} style="display: inline-flex;">
                                                <lightning-icon class="iconPost" icon-name="utility:table"
                                                    alternative-text="preview" size="x-small"
                                                    style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"></lightning-icon>
                                                <h5 class="Post" style="border-top:1px solid #000000; color:#000000;">
                                                    POSTS</h5>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="slds-col slds-size_2-of-12"></div>
                            </div>
                            <br>
                            <div class="slds-grid">
                                <template if:true={isPostProfile}>
                                    <div class="slds-grid slds-wrap">
                                        <template for:each={userPosts} for:item="iteratePost">
                                            <div class="slds-col slds-size_4-of-12" style="border:2px silid #fff;"
                                                key={iteratePost}>
                                                <img src={iteratePost.post.imageUrl} alt="" style="height:300px;"
                                                    width="100%">
                                            </div>
                                        </template>
                                    </div>
                                </template>

                            </div>

                        </div>
                        <div class="slds-col slds-size_2-of-12"></div>
                    </div>
                </template>

                <template if:true={isMsg}>
                    <div style="width: 100%; height:100%;">
                        <div class="message">
                            <div class="slds-grid">
                                <div class="slds-col slds-size_3-of-12">
                                    <h2 style="font-size: 1.5rem; padding:8%; font-weight:500;">{UserName}</h2>
                                </div>
                                <div class="slds-col slds-size_7-of-12"></div>
                                <div class="slds-col slds-size_2-of-12">
                                    <lightning-icon class="iconPost" icon-name="utility:new_direct_message"
                                        alternative-text="preview" size="small"
                                        style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"
                                        onclick={openMsgHandler}></lightning-icon>
                                </div>
                            </div>
                            <div>
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_3-of-12">
                                        <h2 style="font-size: 1rem; color:#000000; padding:8%;">Messages</h2>
                                    </div>
                                    <div class="slds-col slds-size_7-of-12"></div>
                                    <div class="slds-col slds-size_2-of-12">
                                        <h2 style="color:gray;">Request</h2>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <template for:each={userProfileMsg} for:item="iterateRec">
                                    <div class="slds-grid userPro" key={iterateRec.userId}
                                        data-otheruser={iterateRec.userId} style="padding: 10px 10px;"
                                        onclick={msgProfileHandler}>
                                        <div class="slds-col slds-size_2-of-12"><img src={iterateRec.profileImg}
                                                height="40px" width="40px" style="border-radius:50%;"></div>
                                        <div class="slds-col slds-size_7-of-12">
                                            <h5 style="font-size: 0.8rem; color:#000000;"> <b>{iterateRec.name}</b></h5>
                                            <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                                {iterateRec.msg}</p>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12"></div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </template>

                <template if:true={isMessage}>
                    <div class="slds-col slds-size_10-of-12">
                        <div class="slds-grid displayMsg">
                            <div style="margin:auto; justify-content:center;">
                                <lightning-icon class="iconPost" icon-name="utility:comments" alternative-text="preview"
                                    size="large"
                                    style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"></lightning-icon>
                                <h2 style="margin: 2px 0px; font-size:1.2rem;">Your messages</h2>
                                <p style="margin: 2px 0px;">Send private photos and messages to a friend or group</p>
                                <button class="slds-button slds-button_brand" style="margin: 2px 0px;"
                                    onclick={openMsgHandler}>Send message</button>
                            </div>
                        </div>
                    </div>
                </template>

                <template if:true={isUserMsg}>
                    <div class="slds-col slds-size_1-of-12" style="width:135px;"></div>
                    <div class="slds-col slds-size_9-of-12">
                        <div class="slds-grid" style="height:50px; border-bottom:1px solid rgb(232, 231, 231);">
                            <div class="slds-col slds-size_2-of-12">
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_6-of-12"><img src={allMsg.profileImg} height="40px"
                                            width="40px" style="border-radius:50%;"></div>
                                    <div class="slds-col slds-size_6-of-12">
                                        <h2 style="font-size: 1rem;">{allMsg.name}</h2>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-col slds-size_9-of-12"></div>
                            <div class="slds-col slds-size_1-of-12">
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_4-of-12"> <lightning-icon class="iconPost"
                                            icon-name="utility:call" alternative-text="preview" size="small"
                                            style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"></lightning-icon>
                                    </div>
                                    <div class="slds-col slds-size_4-of-12">
                                        <lightning-icon class="iconPost" icon-name="utility:video"
                                            alternative-text="preview" size="small"
                                            style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;">

                                        </lightning-icon>
                                    </div>
                                    <div class="slds-col slds-size_4-of-12"> <lightning-icon class="iconPost"
                                            icon-name="utility:info" alternative-text="preview" size="small"
                                            style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"></lightning-icon>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="msgBox">
                            <div class="slds-grid" style="height:200px;">
                                <div class="slds-col slds-size_4-of-12">
                                </div>
                                <div class="slds-col slds-size_4-of-12" style="text-align:center; align-items:center;">
                                    <img src={allMsg.profileImg} height="50px" width="50px" style="border-radius:50%;">
                                    <h2 style="font-size: 1.2rem;">{allMsg.name}</h2>
                                    <button class="slds-button"
                                        style="background: rgb(217, 214, 214); color:#000000; border-radius:10px; padding:0px 15px;">View
                                        Profile</button>
                                </div>
                                <div class="slds-col slds-size_4-of-12">
                                </div>
                            </div>
                            <div>
                                <template for:each={allMsg.msgList} for:item="iterateMsg">
                                    <template if:true={iterateMsg.receiver}>
                                        <template if:false={iterateMsg.img}>
                                            <div key={iterateMsg}>
                                                <div class="slds-grid">
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                    <div class="slds-col slds-size_4-of-12"
                                                        style="color: gray; text-align:center;">
                                                        {iterateMsg.msgTime}
                                                    </div>
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                </div>
                                                <div class="slds-grid">
                                                    <div class="slds-col slds-size_3-of-12">
                                                        <div class="slds-grid">
                                                            <div class="slds-col slds-size_2-of-12"><img
                                                                    src={allMsg.profileImg} height="25px" width="25px"
                                                                    style="border-radius:50%; margin-left:10px;"></div>
                                                            <div class="slds-col slds-size_10-of-12"
                                                                style="border-radius: 20px; background-color:rgb(209, 202, 202); color:#000000;  padding:10px 5px;">

                                                                <div style="float: center;">{iterateMsg.msg}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-col slds-size_9-of-12"></div>
                                                </div>
                                            </div>

                                        </template>
                                        <template if:true={iterateMsg.img}>
                                            <div key={iterateMsg}>
                                                <div class="slds-grid">
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                    <div class="slds-col slds-size_4-of-12"
                                                        style="color: gray; text-align:center;">
                                                        {iterateMsg.msgTime}
                                                    </div>
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                </div>
                                                <div class="slds-grid">
                                                    <div class="slds-col slds-size_3-of-12">
                                                        <div class="slds-grid">
                                                            <div class="slds-col slds-size_2-of-12"><img
                                                                    src={allMsg.profileImg} height="25px" width="25px"
                                                                    style="border-radius:50%; margin-left:10px;"></div>
                                                            <div class="slds-col slds-size_10-of-12"
                                                                style="border-radius: 20px; color:#000000;  padding:10px 5px;">

                                                                <div style="height: 100%; width:100%;">
                                                                    <img src={iterateMsg.imgUrl} style="height: 250px;"
                                                                        width="100%">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="slds-col slds-size_9-of-12"></div>
                                                </div>
                                            </div>
                                        </template>

                                    </template>
                                    <br key={iterateMsg}>
                                    <template if:false={iterateMsg.receiver}>
                                        <template if:false={iterateMsg.img}>
                                            <div key={iterateMsg}>
                                                <div class="slds-grid">
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                    <div class="slds-col slds-size_4-of-12"
                                                        style="color: gray; text-align:center;">{iterateMsg.msgTime}
                                                    </div>
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                </div>
                                                <div class="slds-grid" data-msgp={iterateMsg.msgId}
                                                    onmouseenter={msgDeleteHandler} onmouseleave={msgDeleteFalse}>
                                                    <div class="slds-col slds-size_8-of-12">
                                                        <div style="float: right; display:none;"
                                                            data-msgid={iterateMsg.msgId}>
                                                            <lightning-button-menu class="dropdown"
                                                                alternative-text="Show menu"
                                                                icon-name="utility:threedots_vertical"
                                                                onselect={handleOnselect}
                                                                style="border:none; box-shadow:none; outline: none;">
                                                                <lightning-menu-item value={iterateMsg.msgId}
                                                                    label="Unsend"></lightning-menu-item>
                                                            </lightning-button-menu>
                                                        </div>
                                                    </div>
                                                    <div class="slds-col slds-size_3-of-12"
                                                        style="border-radius: 20px; background-color:rgb(68, 188, 236); color:#fff; padding:10px 5px;">
                                                        <div style="float: center;">{iterateMsg.msg}</div>
                                                    </div>
                                                    <div class="slds-col slds-size_1-of-12"></div>
                                                </div>
                                            </div>
                                        </template>
                                        <template if:true={iterateMsg.img}>
                                            <div key={iterateMsg}>
                                                <div class="slds-grid">
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                    <div class="slds-col slds-size_4-of-12"
                                                        style="color: gray; text-align:center;">{iterateMsg.msgTime}
                                                    </div>
                                                    <div class="slds-col slds-size_4-of-12"></div>
                                                </div>
                                                <div class="slds-grid" data-msgp={iterateMsg.msgId}
                                                    onmouseenter={msgDeleteHandler} onmouseleave={msgDeleteFalse}>
                                                    <div class="slds-col slds-size_8-of-12">
                                                        <div style="float: right; display:none;"
                                                            data-msgid={iterateMsg.msgId}>
                                                            <lightning-button-menu class="dropdown"
                                                                alternative-text="Show menu"
                                                                icon-name="utility:threedots_vertical"
                                                                onselect={handleOnselect}
                                                                style="border:none; box-shadow:none; outline: none;">
                                                                <lightning-menu-item value={iterateMsg.msgId}
                                                                    label="Unsend"></lightning-menu-item>
                                                            </lightning-button-menu>
                                                        </div>
                                                    </div>
                                                    <div class="slds-col slds-size_3-of-12"
                                                        style="border-radius: 20px; color:#fff; padding:10px 5px;">
                                                        <div style="float: center;"><img src={iterateMsg.imgUrl}
                                                                style="height: 250px;" width="100%"></div>
                                                    </div>
                                                    <div class="slds-col slds-size_1-of-12"></div>
                                                </div>
                                            </div>
                                        </template>
                                    </template>
                                </template>
                            </div>
                        </div>
                        <div class="slds-grid"
                            style="height: 50px; border-radius:20px; border:1px solid rgb(215, 212, 212);">
                            <div class="slds-col slds-size_11-of-12">
                                <lightning-textarea name="input1"
                                    style="border:none; display:flex; resize: none; margin-top:4px;" class="msgArea"
                                    placeholder="Message...." rows="1" onchange={msgSendHandler}></lightning-textarea>
                            </div>
                            <div class="slds-col slds-size_1-of-12">
                                <template if:false={msgData}>
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_4-of-12">
                                            <lightning-icon class="iconPost" icon-name="utility:muted"
                                                alternative-text="preview" size="small"
                                                style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"></lightning-icon>
                                        </div>
                                        <div class="slds-col slds-size_4-of-12">
                                            <input type="file" class="fileInput" style="display: none;"
                                                onchange={uploadFileHandler}></input>
                                            <lightning-icon class="iconPost" icon-name="utility:image"
                                                alternative-text="preview" size="small"
                                                style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"
                                                data-receiverid={allMsg.userId} onclick={fileInsertHandler}>
                                            </lightning-icon>
                                        </div>
                                        <div class="slds-col slds-size_4-of-12">
                                            <lightning-icon class="iconPost" icon-name="utility:heart"
                                                alternative-text="preview" size="small"
                                                style="--sds-c-icon-color-foreground-default:#000000; margin-top:2px;"></lightning-icon>
                                        </div>
                                    </div>
                                </template>
                                <template if:true={msgData}>
                                    <div style="text-align: center;">
                                        <p style="color:rgb(18, 155, 209); font-weight:700; margin-top:12px;"
                                            data-userreceiver={allMsg.userId} onclick={msgSendingHandler}>
                                            Send
                                        </p>
                                    </div>
                                </template>


                            </div>
                        </div>

                    </div>

                </template>

                <template if:true={isReel}>
                    
                        <div class="slds-col slds-size_1-of-12" style="width:135px;"></div>
                        <div class="slds-col slds-size_9-of-12">
                            <div class="slds-grid">
                                <div class="slds-col slds-size_3-of-12"></div>
                                <div class="slds-col slds-size_6-of-12 reelScroll">
                                    <template for:each={reels} for:item="iterate">
                                    
                                    <div style="position:relative;padding-bottom:56.25%; width:350px;height:500px;" key={iterate}> <iframe
                                            style=" width:100%; height:100%; position:absolute;left:0px;top:0px;"
                                            frameborder="0" type="text/html"
                                            src={iterate.videoLink__c}
                                            width="100%" height="100%" allowfullscreen title="Dailymotion Video Player"
                                            allow="autoplay"> </iframe> </div>
                                            <br key={iterate}>
                                            <br key={iterate}></template>
                                </div>

                            </div>
                            <div class="slds-col slds-size_3-of-12"></div>
                        </div>
                   

                </template>

            </div>

        </template>
    </div>
</template>