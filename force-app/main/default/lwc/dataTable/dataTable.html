<template>
    <!-- <div class="customdataIN"></div> -->
    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading" variant="brand" size="large">
        </lightning-spinner>
    </template>
    <template if:true={isCreateModal}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-03" aria-modal="true" aria-describedby="modal-content-id-2" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">                    
                    <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">Create Account</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2">
                    <lightning-record-form object-api-name={objectApiName} fields={fields} onsubmit={handleCreateSubmit} oncancel={handleCancelCreate}></lightning-record-form> 
                </div>               
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
    
    
    <template if:true={isDeleteModal}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-03" aria-modal="true" aria-describedby="modal-content-id-3" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">                    
                    <h2 id="modal-heading-03" class="slds-text-heading_medium slds-hyphenate">Delete Account</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-3">
                    <h1>Are you sure you want to delete this account?</h1>
                </div>               
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={deleteCancelModal} title="Cancel">Cancel</button>
                    <button class="slds-button slds-button_brand" onclick={deleteHandler} title="delete file">Delete</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template> 
    
    
    
    <article class="slds-card" style="--slds-c-card-color-background:#f3f3f3;">
        <div class="slds-card__header slds-grid" style="height: 90px;">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure" style="margin: 15px;margin-bottom:60px;">
                    <lightning-icon class="iconHoverView" icon-name="standard:account"  alternative-text="preview" size="medium"></lightning-icon>
                    <span class="slds-assistive-text">Account</span>                        
                </div>
                <div class="slds-media__body" style="margin-bottom: 60px;">
                    <h4 class="slds-card__header-title">
                        <a href="#" class="slds-card__header-link slds-truncate" title="Accounts">
                            <span>Accounts</span>
                        </a>
                    </h4>
                </div>
                <div class="slds-no-flex" style="margin:50px;">
                    <button class="slds-button slds-button_neutral" style="margin: 0px;" onclick={openCreateRecModal}>New</button>
                    <lightning-input  type="search" value={searchValue} style="width:120%;" onchange={searchInputKey}> </lightning-input>  
                </div>
                
            </header>
        </div>       
    </article>
    <template if:true={isRecord}>
        <template if:false={isSearchData}>
            <div style="height:400px">
                <lightning-datatable 
                data={recordsToDisplay}
                columns={columns}
                key-field="Id"
                sorted-by={sortBy}
                sorted-direction={sortDirection}
                onsort={doSorting}
                onsave={handleSave}
                onrowaction={handleRowAction}>                
            </lightning-datatable>
            
            </div>
     
          </template>
    
      <div class="slds-grid slds-grid_vertical-align-center slds-grid_align-spread" style="padding-top: 0.5em;">
        <!--RECORDS PER PAGE-->
        <div class="slds-col">
            <div class="slds-list_inline slds-p-bottom_xx-small">
                <label class="slds-text-color_weak slds-p-horizontal_x-small" for="recordsPerPage">Page Size:</label>
                <div class="slds-select_container">
                    <select class="slds-select" id="recordsPerPage" onchange={handleRecordsPerPage}>
                        <template for:each={pageSizeOptions} for:item="option">
                            <option key={option} value={option}>{option}</option>
                        </template>
                    </select>
                </div>
            </div>
        </div>
        <!--PAGE NAVIGATION-->
        <div class="slds-align_absolute-center" style="height:5rem">
            <lightning-button disabled={bDisableFirst} icon-name="utility:jump_to_left" label="First" class="slds-p-horizontal_x-small" alternative-text="first page" onclick={firstPage}></lightning-button>
            <lightning-button disabled={bDisableFirst} icon-name="utility:chevronleft" label="Previous" alternative-text="Previous" onclick={previousPage}></lightning-button>
            &nbsp;
            <span class="slds-badge">Showing {pageNumber} &nbsp;of&nbsp; {totalPages} &nbsp;&nbsp;Page(s)</span>
            &nbsp;
            <lightning-button disabled={bDisableLast} icon-name="utility:chevronright" label="Next" alternative-text="Next" onclick={nextPage} class="slds-p-horizontal_x-small" icon-position="right"></lightning-button>
            <lightning-button disabled={bDisableLast} icon-name="utility:jump_to_right" label="Last" alternative-text="last page" onclick={lastPage} icon-position="right"></lightning-button>
        </div>
        <!--TOTAL RECORDS-->
        <div class="slds-clearfix">
            <div class="slds-float_right">
                <span class="slds-badge"> Total Records: {totalRecords}</span>
            </div>
        </div>
    </div>
</template>
<template if:true={isSearchData}>
    <template if:false={isRecord}>
        <div style="height:400px">
            <lightning-datatable data={searchData} columns={columns} key-field="Id" sorted-by={sortBy} sorted-direction={sortDirection} onsort={doSorting}>                
            </lightning-datatable>            
        </div>
    </template>
</template>
<template if:true={illustractionTrue}>
    <c-no-data></c-no-data>
</template>
<template if:true={error}>
    {error}
</template>

</template>